<!DOCTYPE html>
<html lang="en">
<head>
	<title>IRC | LandChad.net</title>
	<link rel="canonical" href="https://landchad.net">
	<link rel='alternate' type='application/rss+xml' title="LandChad.net RSS" href='/index.xml'>
	<link rel='stylesheet' type='text/css' href='/style.css'>
	<link rel="icon" href="/favicon.ico">
	<meta name="description" content="Creating your own chat server for you and your friends is easy, and you don&#39;t have to rely on a complicated system to get started. IRC is an old but gold protocol, and has clients for basically every operating system made since the 80s, with many powerful modern ones on Linux, Mac, and Windows.
Having a chat server for you and your friends makes it impossible for a group of arbitrarily appointed moderators to deplatform you for wrong-think, and gives you greater freedom of communication.">
	<meta name="keywords" content="service">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="index, follow">
	<meta charset="utf-8">
</head>
<body>
<main>
<header><h1><img src="/pix/irc.svg" class=titleicon>IRC</h1></header>
<article>
<p>Creating your own chat server for you and your friends is easy, and you
don't have to rely on a complicated system to get started. IRC is an
old but gold protocol, and has clients for basically every operating
system made since the 80s, with many powerful modern ones on Linux, Mac,
and Windows.</p>
<p>Having a chat server for you and your friends makes it impossible for a
group of arbitrarily appointed moderators to deplatform you for
wrong-think, and gives you greater freedom of communication.</p>
<h2 id="installing">Installing an IRCd</h2>
<p>An IRCd is short for &quot;IRC daemon&quot;, which just means an IRC server. The
most easy IRCd to set up is <a href="https://ergo.chat/">Ergo</a>.</p>
<p>The first thing you need to do is create a new user for the server to be
run by. This is good practice for installing software/servers manually,
as it give you more fine-grained control over which permissions the
application has.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>useradd -m ergo -s /bin/bash
</span></span></code></pre></div><p>Next, we want to switch to our newly created <code>ergo</code> user and create the
server directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo -i -u ergo
</span></span><span style="display:flex;"><span>mkdir server
</span></span></code></pre></div><p>You can find the latest release of Ergo on its GitHub <a href="https://github.com/ergochat/ergo/releases/latest">latest
release</a> page.<br>
There are several platforms available, but you want to choose Linux,
most likely <code>linux-x86_64</code>.<br>
Once you have selected the correct package, copy its URL and replace the
release url with the package URL (still as the <code>ergo</code> user):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>wget <span style="color:#e6db74">&#34;https://github.com/ergochat/ergo/releases/download/v2.10.0/ergo-2.10.0-linux-x86_64.tar.gz&#34;</span>
</span></span><span style="display:flex;"><span>tar -xf ergo-2.10.0-linux-x86_64.tar.gz
</span></span><span style="display:flex;"><span>mv ergo-2.10.0-linux-x86_64/*
</span></span><span style="display:flex;"><span>rm -r ergo-2.10.0-linux-x86_64*
</span></span></code></pre></div><p>Executing <code>ls -l</code> should now yield something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> ergo ergo  <span style="color:#ae81ff">118825</span> Jun  <span style="color:#ae81ff">8</span> 00:51 CHANGELOG.md
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> ergo ergo    <span style="color:#ae81ff">1983</span> May <span style="color:#ae81ff">31</span> 01:48 README
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> ergo ergo   <span style="color:#ae81ff">41440</span> Jun  <span style="color:#ae81ff">8</span> 00:42 default.yaml
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">2</span> ergo ergo    <span style="color:#ae81ff">4096</span> Jul  <span style="color:#ae81ff">1</span> 09:01 docs
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> ergo ergo <span style="color:#ae81ff">9654272</span> Jun  <span style="color:#ae81ff">8</span> 00:53 ergo
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> ergo ergo    <span style="color:#ae81ff">1753</span> May <span style="color:#ae81ff">31</span> 01:48 ergo.motd
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">2</span> ergo ergo   <span style="color:#ae81ff">12288</span> Jul  <span style="color:#ae81ff">1</span> 09:01 languages
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> ergo ergo   <span style="color:#ae81ff">39722</span> Jun  <span style="color:#ae81ff">8</span> 00:42 traditional.yaml
</span></span></code></pre></div><p>If you see something similar to the above, that means Ergo is installed,
although not quite ready to run yet.</p>
<h2 id="configuring">Configuring Ergo</h2>
<p>Now that Ergo is installed, you want to configure it to fit the needs of
your group.<br>
The configuration in this section is tailored towards a small group of
people, and less for a possibly large network, but it should work for
any size of group.</p>
<p>First thing, make sure you're still using the <code>ergo</code> user, and are in
the <code>~/server</code> directory.<br>
If you aren't, you can run the following to get back there:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo -i -u ergo
</span></span><span style="display:flex;"><span>cd ~/server
</span></span></code></pre></div><p>To start configuring, we need to copy some files:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cp default.yaml ircd.yaml
</span></span><span style="display:flex;"><span>cp ergo.motd ircd.motd
</span></span></code></pre></div><p>Next, generate certificate files for TLS:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>./ergo mkcerts
</span></span></code></pre></div><p>Ergo comes with a default configuration file with detailed documentation
that can be used to guide you through the configuration process. This
guide will help you setup the server for a typical use-case, but if you
see any settings that you would like to change along the way, go ahead
and change them, as long as you know what you're doing.</p>
<p>The next steps involve editing the newly copied <code>ircd.yaml</code> file. If you
do not know how to edit text files from the command line, you can use
<code>nano</code>, which is very simple, using arrow keys to navigate, <kbd>CTRL+O</kbd> to
save, and <kbd>CTRL+X</kbd> to exit.<br>
Another option is <code>vim</code>, which is a much more powerful text editor, but
has a learning curve. It is only recommended for this guide if you
already know how to use it.<br>
Lastly, you can copy the <code>ircd.yaml</code> file to a text editor on your
computer and edit it with a GUI text editor of your choice. If that is
what you choose to do, you may want to just download the file from
<a href="https://raw.githubusercontent.com/ergochat/ergo/master/default.yaml">Ergo's
GitHub</a>,
edit it on your computer, clear the <code>ircd.yaml</code> file on the server, and
then paste the contents from your computer into the blank file.<br>
No matter how you do it, the next steps assume you can edit the
configuration file.</p>
<p><strong>Note</strong>:<br>
The options highlighted in this section are not a complete overview of
all options. Instead, the options shown are the ones which are most
relevant to a small network.<br>
You should read over the configuration file yourself if you are curious
about everything you can change.</p>
<h3 id="configuring-names">Network and server names</h3>
<p>One of the first properties in the config file is network name. You can
change this to whatever you like, as it will show up as the name when
you connect to the server.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># network configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">network</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># name of the network</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;Land-Chat&#34;</span>
</span></span></code></pre></div><p>Change the server name to your server's domain name.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># server configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># server name</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;<mark>example.org</mark>&#34;</span>
</span></span></code></pre></div><h3 id="configuring-password">Network password</h3>
<p>The next step is optional, depending on if you want your network
password protected or not. The benefit of password protection is fairly
obvious; nobody can connect to your network unless you gave them the
password. If you're wanting to run a public network which anyone can
join and create a channel, you want to skip this, but for personal
setups, it is highly recommended.</p>
<p>Generate a password to use by executing the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>./ergo genpasswd
</span></span></code></pre></div><p>It will ask you to enter a password and confirm it, then you will be
given a hashed password.<br>
Copy this password, and paste it into the following field (also removing
the <code>#</code> before the <code>password:</code> line):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># password to login to the server, generated using `ergo genpasswd`:</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">password</span>: <span style="color:#e6db74">&#34;<mark>your hashed password</mark>&#34;</span>
</span></span></code></pre></div><h3 id="configuring-motd">Message of the day (MotD)</h3>
<p>Change the MotD (<strong>M</strong>essage <strong>o</strong>f <strong>t</strong>he <strong>D</strong>ay) file to the one you
copied earlier:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># motd filename</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># if you change the motd, you should move it to ircd.motd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">motd</span>: <span style="color:#ae81ff">ircd.motd</span>
</span></span></code></pre></div><p>Feel free to edit <code>ircd.motd</code> to your heart's content. Its contents
will be sent to clients when they connect to the network.</p>
<h3 id="configuring-ip-limits">IP limits</h3>
<p>For security purposes, you might want to limit the amount of client
connections per IP. For a private network, 4 is likely the maximum
amount of connections you will have per IP, so that is a safe value.<br>
If your network is password protected, this is less of an issue, since
the only people connecting will be people who have the password. The
following is the default, but you can change it to be whichever value
you like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># IP-based DoS protection</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">ip-limits</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># whether to limit the total number of concurrent connections per IP/CIDR</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">count</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># maximum concurrent connections per IP/CIDR</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">max-concurrent-connections</span>: <span style="color:#ae81ff">16</span>
</span></span></code></pre></div><h3 id="configuring-ip-cloaking">IP cloaking</h3>
<p>Traditionally, IRC networks expose users' IP addresses to everyone.
This is not a good practice for privacy, however. With Ergo, IP cloaking
is enable by default. You can enable or disable it if you like, and
change how it looks to users.<br>
In this case, <code>netname</code> was changed to <code>&quot;chad&quot;</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># IP cloaking hides users&#39; IP addresses from other users and from channel admins</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (but not from server admins), while still allowing channel admins to ban</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># offending IP addresses or networks. In place of hostnames derived from reverse</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DNS, users see fake domain names like pwbs2ui4377257x8.irc. These names are</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generated deterministically from the underlying IP address, but if the underlying</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># IP is not already known, it is infeasible to recover it from the cloaked name.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you disable this, you should probably enable lookup-hostnames in its place.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">ip-cloaking</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># whether to enable IP cloaking</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># whether to use these cloak settings (specifically, `netname` and `num-bits`)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># to produce unique hostnames for always-on clients. you can enable this even if</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># you disabled IP cloaking for normal clients above. if this is disabled,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># always-on clients will all have an identical hostname (the server name).</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled-for-always-on</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># fake TLD at the end of the hostname, e.g., pwbs2ui4377257x8.irc</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># you may want to use your network name here</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">netname</span>: <span style="color:#e6db74">&#34;chad&#34;</span>
</span></span></code></pre></div><h3 id="configuring-hexchat-password">Password enforcement adjustments for HexChat (and possibly other clients)</h3>
<p>Ergo offers account registration to allow users to do things like use
history and bouncer features, register channels, etc.<br>
In clients such as HexChat, server passwords may conflict with account
passwords, so the following setting should be enabled if you wish to use
accounts with clients such as HexChat.<br>
Note that this could under some circumstances be considered a security
hazard, as a user with an account does not need to know the server
password to connect, although that user would have needed to register an
account before the server had a password, and then a password would need
to have been set after the fact, so this can be considered a very small
concern if your setup has always had a password.<br>
Also keep in mind that this setting has no effect if your network does
not even have a password at all.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># some clients (notably Pidgin and Hexchat) offer only a single password field,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># which makes it impossible to specify a separate server password (for the PASS</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># command) and SASL password. if this option is set to true, a client that</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># successfully authenticates with SASL will not be required to send</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PASS as well, so it can be configured to authenticate with SASL only.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">skip-server-password</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h3 id="configuring-multiclient">Multiclient, always-on clients, history, etc</h3>
<p>Traditionally, IRC servers have no message history, and once you close
your client, you cannot receive messages, and are not shown to be online
at all. Ergo includes functionality to allow users to both receive
history, and keep their clients &quot;online&quot; even after they have left. It
also allows multiple clients to connect to the same account.<br>
If you are running a private network for friends, you should set
<code>always-on</code> and <code>auto-away</code> to <code>opt-out</code>, to have all users with
accounts to appear as if they are online at all times, and be able to
receive messages when they are offline.<br>
For a public network, keep everything as their default values, since you
probably do not want randoms having this by default.<br>
If for some reason you do not want any of these features at all, you can
set <code>enabled</code> to <code>false</code>, but this is not recommended. Below are the
recommended values for a private network (e.g. for friends) where users
with accounts will be able to receive messages and history while they
are offline.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># multiclient controls whether Ergo allows multiple connections to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># attach to the same client/nickname identity; this is part of the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># functionality traditionally provided by a bouncer like ZNC</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">multiclient</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># when disabled, each connection must use a separate nickname (as is the</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># typical behavior of IRC servers). when enabled, a new connection that</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># has authenticated with SASL can associate itself with an existing</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if this is disabled, clients have to opt in to bouncer functionality</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># using nickserv or the cap system. if it&#39;s enabled, they can opt out</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># via nickserv</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">allowed-by-default</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># whether to allow clients that remain on the server even</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># when they have no active connections. The possible values are:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;disabled&#34;, &#34;opt-in&#34;, &#34;opt-out&#34;, or &#34;mandatory&#34;.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">always-on</span>: <span style="color:#e6db74">&#34;opt-out&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># whether to mark always-on clients away when they have no active connections:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">auto-away</span>: <span style="color:#e6db74">&#34;opt-out&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># QUIT always-on clients from the server if they go this long without connecting</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># (use 0 or omit for no expiration):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#always-on-expiration: 90d</span>
</span></span></code></pre></div><h3 id="configuring-vhosts">VHosts</h3>
<p>IP cloaking was mentioned previously, and somewhat related to that, Ergo
includes &quot;vhost&quot; functionality, which allows users to set a custom
IP/host string. This is mostly for cosmetic value, and does not
interfere with operators being able to see actual IP addresses for
banning, but if you do not want it enable for some reason, you can
disable it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># vhosts controls the assignment of vhosts (strings displayed in place of the user&#39;s</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># hostname/IP) by the HostServ service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">vhosts</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># are vhosts enabled at all?</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h3 id="configuring-channels">Channels</h3>
<p>Channels are where everyone on an IRC network talk. By default, anyone
can create a channel, and anyone with an account can register one. The
difference between a normal channel and a registered one is that the
registered one will preserve the operator status of the person who
created, whereas a normal channel's owner will lose operator status if
they leave the channel or disconnect from the network.<br>
There are various settings for channels available, but the defaults are
suitable for a private network with trust among users, or where you just
want anyone to have the ability to create a channel. Below are the
default values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># channel options</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">channels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># modes that are set when new channels are created</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># +n is no-external-messages and +t is op-only-topic</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># see  /QUOTE HELP cmodes  for more channel modes</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">default-modes</span>: <span style="color:#ae81ff">+nt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># how many channels can a client be in at once?</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">max-channels-per-client</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if this is true, new channels can only be created by operators with the</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># `chanreg` operator capability</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">operator-only-creation</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># channel registration - requires an account</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">registration</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># can users register new channels?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># restrict new channel registrations to operators only?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># (operators can then transfer channels to regular users using /CS TRANSFER)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">operator-only</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># how many channels can each account register?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">max-channels-per-account</span>: <span style="color:#ae81ff">15</span>
</span></span></code></pre></div><h3 id="configuring-operators">Operators (administrators, etc)</h3>
<p>The IRC term for an administrator or another privileged user is
&quot;operator&quot;, or &quot;oper&quot; for short.<br>
Ergo's opers have different permissions that can be granted to them,
and are defined in &quot;classes&quot;, basically groups of permissions under a
name. For example, &quot;chat-moderator&quot; and &quot;server-admin&quot; are defined
in the default configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># operator classes</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">oper-classes</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># chat moderator: can ban/unban users from the server, join channels,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># fix mode issues and sort out vhosts.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;chat-moderator&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># title shown in WHOIS</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">title</span>: <span style="color:#ae81ff">Chat Moderator</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># capability names</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">capabilities</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;kill&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;ban&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;nofakelag&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;roleplay&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;relaymsg&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;vhosts&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;sajoin&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;samode&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;snomasks&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># server admin: has full control of the ircd, including nickname and</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># channel registrations</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;server-admin&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># title shown in WHOIS</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">title</span>: <span style="color:#ae81ff">Server Admin</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># oper class this extends from</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">extends</span>: <span style="color:#e6db74">&#34;chat-moderator&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># capability names</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">capabilities</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;rehash&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;accreg&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;chanreg&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;history&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;defcon&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;massmessage&#34;</span>
</span></span></code></pre></div><p>The above can be kept with their default values, but you are free to
modify them or create any new classes that are appropriate for your
setup.<br>
Next, let's actually create an operator account:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># ircd operators</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">opers</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># default operator named &#39;gigachad&#39;; log in with /OPER gigachad &lt;password&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;gigachad&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># which capabilities this oper has access to</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">class</span>: <span style="color:#e6db74">&#34;server-admin&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># custom whois line</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">whois-line</span>: <span style="color:#ae81ff">is the server administrator</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># custom hostname</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">vhost</span>: <span style="color:#e6db74">&#34;gigachad&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># normally, operator status is visible to unprivileged users in WHO and WHOIS</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># responses. this can be disabled with &#39;hidden&#39;. (&#39;hidden&#39; also causes the</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># &#39;vhost&#39; line above to be ignored.)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">hidden</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># modes are modes to auto-set upon opering-up. uncomment this to automatically</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># enable snomasks (&#34;server notification masks&#34; that alert you to server events;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># see `/quote help snomasks` while opered-up for more information):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#modes: +is acjknoqtuxv</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># operators can be authenticated either by password (with the /OPER command),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># or by certificate fingerprint, or both. if a password hash is set, then a</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># password is required to oper up (e.g., /OPER dan mypassword). to generate</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># the hash, use `ergo genpasswd`.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">password</span>: <span style="color:#e6db74">&#34;&lt;your oper password&gt;&#34;</span>
</span></span></code></pre></div><p>This is a modified version of the default oper entry. The account name
is &quot;gigachad&quot;, but you can change it to anything.<br>
Replace <code>&lt;your oper password&gt;</code> with a password generated by
<code>./ergo genpasswd</code>, and you will have a new oper account to use.<br>
Note that to log into an oper account, clients have to enter
<code>/OPER &lt;oper name&gt; &lt;oper password&gt;</code> each time they log in. This can be
automated by most clients by setting the command to be executed when the
client logs in. In the case of HexChat, you can edit your network and
add the command to the <code>Connect commands</code> tab of the menu.<br>
You can copy everything from <code>&quot;gigachad&quot;</code> to the end of the line, paste
it again, and change the name to create another oper account. Another,
less privileged example of an oper is shown as a comment below the above
configuration snippet.</p>
<h3 id="configuring-history">Chat history</h3>
<p>Traditionally, IRC networks do not store, relay, or handle chat history
in any way.<br>
On a privacy standpoint, this is a good thing, since chats are entirely
ephemeral and handled by clients.<br>
On a practicality standpoint, this is a bad thing, since people have to
keep a client connected 24/7 to see message history.<br>
For normalfriends, this can be a big problem, not only because having to
stay online 24/7 is just annoying or infeasible, but also because they
are likely used to chat platforms that handle history for them.<br>
With this in mind, enabling history is a good idea if you want to move
friends over to IRC, and will make things a lot more pleasant for
private networks.</p>
<p>Ergo's <code>history</code> configuration group is very long, so it is encouraged
to read over it yourself. This section will go over the most important
pieces of that configuration group.</p>
<p>History is not endless (unless you want it to be), and the amount that
can be stored for channels is configurable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># how many channel-specific events (messages, joins, parts) should be tracked per channel?</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">channel-length</span>: <span style="color:#ae81ff">2048</span>
</span></span></code></pre></div><p>History is already enabled by default, but that just means it is being
collected, not relayed by default. To relay history to clients when they
connect, change the following to the amount of messages that you think
is appropriate:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># number of messages to automatically play back on channel join (0 to disable):</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">autoreplay-on-join</span>: <span style="color:#ae81ff">250</span>
</span></span></code></pre></div><p>History older than a certain time can be configured to be deleted or be
inaccessible. The default cutoff time is 1 week, but this is
configurable as well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># options to delete old messages, or prevent them from being retrieved</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">restrictions</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if this is set, messages older than this cannot be retrieved by anyone</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># (and will eventually be deleted from persistent storage, if that&#39;s enabled)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">expire-time</span>: <span style="color:#ae81ff">1w</span>
</span></span></code></pre></div><p>By default, Ergo only stores chat history in memory, so when the server
restarts, all history is lost. If you wish to have chat history persist
beyond restarts, you must store it in a MySQL database:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># options to store history messages in a persistent database (currently only MySQL).</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># in order to enable any of this functionality, you must configure a MySQL server</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># in the `datastore.mysql` section.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">persistent</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># store unregistered channel messages in the persistent database?</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">unregistered-channels</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># connection information for MySQL (currently only used for persistent history):</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">mysql</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">host</span>: <span style="color:#e6db74">&#34;localhost&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">port</span>: <span style="color:#ae81ff">3306</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if socket-path is set, it will be used instead of host:port</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#socket-path: &#34;/var/run/mysqld/mysqld.sock&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">user</span>: <span style="color:#e6db74">&#34;ergo&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">password</span>: <span style="color:#e6db74">&#34;hunter2&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">history-database</span>: <span style="color:#e6db74">&#34;ergo_history&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">timeout</span>: <span style="color:#ae81ff">3s</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">max-conns</span>: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># this may be necessary to prevent middleware from closing your connections:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#conn-max-lifetime: 180s</span>
</span></span></code></pre></div><p>For privacy reasons, you may want to allow users to delete their own
messages in history, or export their messages to JSON:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># options to control how messages are stored and deleted:</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">retention</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># allow users to delete their own messages from history?</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">allow-individual-delete</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if persistent history is enabled, create additional index tables,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># allowing deletion of JSON export of an account&#39;s messages. this</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># may be needed for compliance with data privacy regulations.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enable-account-indexing</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h3 id="configuring-spam">Spam reduction</h3>
<p>Most IRC networks have measures in place to reduce chat spam. By
default, &quot;fakelag&quot; is enabled in Ergo, and that can deal with most
aggregious chat spam.<br>
If you are running a private network where user trust is high, you can
disable it so that there are no limits on the speed that messages can be
sent.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># fakelag: prevents clients from spamming commands too rapidly</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">fakelag</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># whether to enforce fakelag</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># time unit for counting command rates</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">window</span>: <span style="color:#ae81ff">1s</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># clients can send this many commands without fakelag being imposed</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">burst-limit</span>: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># once clients have exceeded their burst allowance, they can send only</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># this many commands per `window`:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">messages-per-window</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># client status resets to the default state if they go this long without</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># sending any commands:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">cooldown</span>: <span style="color:#ae81ff">2s</span>
</span></span></code></pre></div><h2 id="starting-and-using-your-server">Starting and using your server</h2>
<p>Now that Ergo is both installed and configured, you can actually start
using it!</p>
<h3 id="using-starting">Starting the server</h3>
<p>First thing, make sure you're still using the <code>ergo</code> user, and are in
the <code>~/server</code> directory.<br>
If you aren't, you can run the following to get back there:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo -i -u ergo
</span></span><span style="display:flex;"><span>cd server
</span></span></code></pre></div><p>Starting the server is done in one command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>./ergo run
</span></span></code></pre></div><p>It will stay online until you close the terminal, or press <kbd>CTRL+C</kbd>.
Don't worry, the next section goes over how to make it run like a
normal server with a SystemD service.<br>
If you have not already, make sure the port <code>6697</code> is not blocked on
your server. If you are using UFW as your firewall, you need to run
<code>ufw enable 6697</code> (not as the <code>ergo</code> user, of course).<br>
If you make and configuration changes while the server is running, you
can apply them without restarting by typing <code>/rehash</code> as an operator.</p>
<h3 id="using-connecting">Connecting to the server</h3>
<p>To use IRC, you of course need an IRC client. There are many choices
available, but the most widely used for Windows and Linux is
<a href="https://hexchat.github.io/">HexChat</a>. On Mac, you have a slightly nicer
option with <a href="https://www.codeux.com/textual/">Textual</a>, although you
have to <a href="https://github.com/Codeux-Software/Textual/#building-textual">compile it from
source</a> if
you want to use it for free.<br>
A more user-friendly and modern client choice is TheLounge, which is
explained in the last section of this guide, if you want to look into
it.</p>
<p>Connecting with HexChat is very easy. When you start it, you will see
something like this:</p>

<figure ><a href="/pix/irc/hexchat-network-select.png"><img src="/pix/irc/hexchat-network-select.png" alt="HexChat network select"></a></figure>

<p>From there, you should click <code>+ Add</code> and name the server whatever you
like (so you can find it on the server list).<br>
Once you have created a new server and named it, select it and click
<code>Edit...</code>. A menu will show up like the one below. Change the domain to
whatever domain your server is running on, and make sure to put in your
server password if you set one.</p>

<figure ><a href="/pix/irc/hexchat-network-edit.png"><img src="/pix/irc/hexchat-network-edit.png" alt="HexChat network edit menu"></a></figure>

<p>Once you're done editing the network, click <code>(X) Close</code>, select your
network from the network list, and click <code>Connect</code>.<br>
If all is well, you should be connected!</p>

<figure ><a href="/pix/irc/hexchat-connection-complete.png"><img src="/pix/irc/hexchat-connection-complete.png" alt="HexChat connection complete"></a></figure>

<p>The process is very similar on Textual.<br>
Create a new network and connect to it. Note that it will ask if you
want to connect even though the certificate is unsigned. This is due to
the self-signed certificates generated for the server, and is not a
problem or security vulnerability, it is just a little annoying.</p>

<figure ><a href="/pix/irc/textual-network-edit.png"><img src="/pix/irc/textual-network-edit.png" alt="Textual network edit menu"></a></figure>

<p>Surviving restarts with a SystemD service</p>
<p>In the beginning of the last section, Ergo was started by simply running
<code>./ergo run</code>, but this is only suitable for testing. To have a proper
server setup, you need to run it as a service. This can be achieved via
a SystemD service.</p>
<p>Before creating your service file, make sure you are in <code>~/server</code> as
the <code>ergo</code> user.<br>
Once you have done that, create a file called <code>start.sh</code> with the
following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>./ergo run
</span></span></code></pre></div><p>Save the file, then mark it as executable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>chmod +x start.sh
</span></span></code></pre></div><p>Now, create a file called <code>ergo.service</code> with the following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-systemd" data-lang="systemd"><span style="display:flex;"><span><span style="color:#66d9ef">[Unit]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Description</span><span style="color:#f92672">=</span><span style="color:#e6db74">Ergo IRC server</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">After</span><span style="color:#f92672">=</span><span style="color:#e6db74">network.target</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you are using MySQL for history storage, comment out the above line</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and uncomment these two instead (you must independently install and configure</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># MySQL for your system):</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Wants=mysql.service</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># After=network.target mysql.service</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Service]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Type</span><span style="color:#f92672">=</span><span style="color:#e6db74">simple</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">User</span><span style="color:#f92672">=</span><span style="color:#e6db74">ergo</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WorkingDirectory</span><span style="color:#f92672">=</span><span style="color:#e6db74">/home/ergo/server</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ExecStart</span><span style="color:#f92672">=</span><span style="color:#e6db74">/home/ergo/server/start.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ExecReload</span><span style="color:#f92672">=</span><span style="color:#e6db74">/bin/kill -HUP $MAINPID</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Restart</span><span style="color:#f92672">=</span><span style="color:#e6db74">on-failure</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">LimitNOFILE</span><span style="color:#f92672">=</span><span style="color:#e6db74">1048576</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Uncomment this for a hidden service:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PrivateNetwork=true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Install]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WantedBy</span><span style="color:#f92672">=</span><span style="color:#e6db74">multi-user.target</span>
</span></span></code></pre></div><p>You now have your service file, but it is not installed yet. To install
it, switch to your normal user, and execute the following lines to
install, enable, and start the SystemD service:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ln -s /home/ergo/server/ergo.service /etc/systemd/system/ergo.service
</span></span><span style="display:flex;"><span>systemctl enable ergo
</span></span><span style="display:flex;"><span>systemctl start ergo
</span></span></code></pre></div><p>Ergo is now installed and running as a service, and will automatically
start when the system boots.</p>
<h2 id="registering">Registering accounts and channels</h2>
<p>Account and channel registration were mentioned multiple times in this
guide, and are indeed very important parts of the modern IRC ecosystem.
You can connect to most IRC networks and talk without creating an
account, but you will not be able to reserve your nickname or register
channels, so it is important to register an account.</p>
<h3 id="registering-accounts">Registering an account with NickServ</h3>
<p>First, make sure you are connected to your IRC network. Once you are,
type <code>/nickserv help</code> to make sure NickServ (the registration system) is
working propertly.<br>
If all is well, type the following, replacing <code>&lt;your password&gt;</code> with the
password you want to use:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/nickserv register &lt;your password&gt;
</span></span></code></pre></div><p>At this point, you are now registered!<br>
The final step is to configure authentication with your client.</p>
<p>In HexChat, all that needs to be done is changing <code>Login method</code> to
<code>SASL (username + password)</code>, and entering your NickServ password that
you used earlier into the password field:</p>

<figure ><a href="/pix/irc/hexchat-sasl.png"><img src="/pix/irc/hexchat-sasl.png" alt="HexChat SASL in network edit menu"></a></figure>

<p>In Textual, open up your network in the menu, and click <code>Identity</code> under
<code>Server Properties</code>. Enter your password in <code>Personal Password</code>, and
check <code>Wait for identification before joining channels</code>.</p>

<figure ><a href="/pix/irc/textual-identity.png"><img src="/pix/irc/textual-identity.png" alt="Textual identity menu"></a></figure>

<p>You will now be logged into your account when you connect to your
network.</p>
<h3 id="registering-channels">Registering channels with ChanServ</h3>
<p>Once you have an account registered, you can register channels with
ChanServ.<br>
To do so, join the channel you want to register, then type the
following, replacing <code>&lt;your channel&gt;</code> with the name of the channel you
want to register:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/chanserv register #&lt;your channel&gt;
</span></span></code></pre></div><p>You are now the channel owner, and are free to appoint operators,
administrators, etc for it. When you go offline, you won't lose
ownership, and you cannot be removed as the owner unless you unregister
the channel later.</p>
<h2 id="moderation">Moderation</h2>
<p>Like any chat, there will come a point where you need to use moderation
tools to keep things under control. Many IRC setup guides do not go over
moderation, so it can be stressful when operators need to actually use
moderation tools.<br>
The main difference between IRC and other chat systems in terms of
moderation is the difference between channel bans and network bans.
Channel ban keeps a person out of channel a channel, whereas a network
ban keeps a person out of the entire network.</p>
<h3 id="moderation-masks">Understanding masks</h3>
<p>Bans are applied &quot;masks&quot;, which are formatted pieces of text that
contain a user's nick (username), their realname value, and their IP
address or host.<br>
This is what a mask looks like: <code>nick!~nick-dude@127.0.0.1</code>.<br>
In bans, asterisks can be used as wildcards, which is useful for banning
IP address ranges, patterns of nicknames, or whatever else you can think
of.<br>
A ban on the nick <code>person</code>, for example, would look like this:
<code>person!*@*</code>.<br>
A ban on anyone with the IP address <code>127.0.0.1</code> would look like this:
<code>*!*@127.0.0.1</code></p>
<h3 id="moderation-real-ips">Discovering real IPs</h3>
<p>Even if IP cloaking is enabled on your network, you can still obtain
real IP addresses/hosts if you are an operator. See the <strong>Operators</strong>
part of the configuration section of this guide on how to become an
operator.<br>
To find out a user's real IP, simply type <code>/whois</code> along with the
user's nick, and you will see information about the user, along with
their real IP address/host.<br>
<code>/whois</code> is not a command that is exclusive to operators, but it does
not reveal as much information to non-operators.</p>
<h3 id="moderation-network-ban">Banning someone from the network</h3>
<p>Any netword-wide moderation action requires being an operator. See the
<strong>Operators</strong> part of the configuration section of this guide on how to
become an operator.<br>
Banning someone from the network is achieved with the <code>/kline</code> command.
To see more info on the command, type <code>/helpop kline</code>.\</p>
<p>To ban a nick from the network:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/kline andkill &lt;nick&gt;!*@*
</span></span></code></pre></div><p>To ban an IP address or host from the network:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/kline andkill *!*@&lt;IP or mask&gt;
</span></span></code></pre></div><p>To unban a mask, you can use the <code>/unkline</code> command with the mask you
want to unban.</p>
<h3 id="moderation-channel-ban">Banning someone from a channel</h3>
<p>Channel owners, administrators, and operators can ban people from
channels. This is not the same as banning someone from the network,
since it only has an effect on one channel. Additionally, a channel
operator is not the same as a network operator.</p>
<p>To ban someone in a channel, type the following in that channel,
replacing <code>&lt;mask&gt;</code> with the user's mask:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/mode +b &lt;mask&gt;
</span></span></code></pre></div><p>Note that this will only ban the user, not kick them immediately. You
will want to run <code>/kick</code> along with the user's nick to also kick them.<br>
To unban a user, run the command above, but replace the <code>+</code> with a <code>-</code>.<br>
You can see who is banned in a channel by typing <code>/banlist</code>.</p>
<h3 id="moderation-muting">Muting people in a channel</h3>
<p>By default, anyone can speak in an IRC channel. To change this, you must
be a channel owner, administrator, or operator.<br>
Channels, along with users, have modes, which modify their behavior.
There is a special mode for channels called <code>m</code> (moderated) which
requires users to be privileged in some way to talk.<br>
To set a channel as moderated, type the following in the channel:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/mode +m
</span></span></code></pre></div><p>Now, users must be an owner, administrator, operator, or be voiced to
talk in the channel This be reversed by typing the command above, but
changing the <code>+</code> to a <code>-</code>.<br>
To voice a user, run the following, replacing <em>&lt;nick&gt;</em> with the
user's nick:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/mode +v &lt;nick&gt;
</span></span></code></pre></div><p>Unvoice the user by typing the above command, but replacing the <code>+</code> with
a <code>-</code>.</p>
<h3 id="moderation-appointing">Appointing channel administrators and operators</h3>
<p>Assuming you a channel owner, you can appoint both administrators and
operators. If you are only an operator, you may only appoint operators.<br>
The difference between administrator and operator is mainly that
administrators cannot have their privileges taken away by operators,
only owners. To appoint an administrator, type the following, replacing
<em>&lt;nick&gt;</em> with the user's nick:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/mode +a &lt;nick&gt;
</span></span></code></pre></div><p>To appoint an operator, type the following, replacing <em>&lt;nick&gt;</em> with
the user's nick:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>/mode +o &lt;nick&gt;
</span></span></code></pre></div><p>You can also use <code>/op</code> and <code>/deop</code> on most clients to appoint and remove
an operator.<br>
To remove administrator or operator status, run either of the above
commands, but replace the <code>+</code> with a <code>-</code>.</p>
<p>Bringing modern-day features to IRC with TheLounge</p>
<p>A large downside to IRC as a protocol is just how old it is, and the
limitations that exist because of it. Other old protocols such as HTTP
were built to be content-agnostic and versitile, but IRC was built with
a very specific set of features, so it has not held up so well to
contemporary chat systems.<br>
A notable thing that IRC as a protocol is missing is file uploads, and
other fancy features that many other chats have.<br>
With that said, these problems can be fixed by clients, although many
clients are still very primitive.</p>
<p><a href="https://thelounge.chat/">TheLounge</a> is a modern self-hosted IRC web
client that tries to make IRC as user-friendly as possible. It can be
the answer to many of the complaints that normalfriends may have about
IRC. It runs on anything with a web browser, can be &quot;installed&quot; since
it is a PWA (Progressive Web App), and is optimized for both desktops
and mobile devices. It keeps you logged in even when you are gone, and
even supports file uploads and embeds.<br>
Effectively, it brings IRC up to the standard of most other chat
systems.</p>
<p>If you would like to setup an instance of TheLounge for you and your
friends, you can take a look at their <a href="https://thelounge.chat/docs/install-and-upgrade">installation
guide</a>.<br>
It is a self-hosted web app, so you can run it for multiple people, not
just yourself.</p>
<hr>
<p><em>Written by <a href="https://termer.net/">Termer</a></em></p>
</article>

</main>
<footer>
	<a href="https://landchad.net">https://landchad.net</a><br><br><a href="/index.xml"><img src="/rss.svg" style="max-height:1.5em" alt="RSS Feed" title="Subscribe via RSS for updates."></a>
</footer>
</body>
</html>
